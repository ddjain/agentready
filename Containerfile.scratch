# AgentReady - Size-Optimized Container
# Self-contained, PyPI-based, stdout output
#
# Build: podman build -t agentready -f Containerfile.scratch .
# Run:   podman run --rm -v /path/to/repo:/repo:ro agentready assess /repo

FROM python:3.12-slim

LABEL name="agentready" \
      version="2.13.0" \
      description="Size-optimized AgentReady for headless environments" \
      maintainer="Jeremy Eder <jeder@redhat.com>"

# Install git (required by AgentReady's GitPython dependency)
RUN apt-get update && \
    apt-get install -y --no-install-recommends git && \
    rm -rf /var/lib/apt/lists/*

# Install agentready from PyPI (latest stable release)
RUN pip install --no-cache-dir agentready

# Create non-root user for security
RUN useradd -u 1001 agentready

# Switch to non-root user
USER 1001
WORKDIR /tmp

# Direct agentready CLI execution
ENTRYPOINT ["agentready"]
CMD ["--help"]
